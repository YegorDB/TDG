!function t(e,s,i){function a(r,o){if(!s[r]){if(!e[r]){var h="function"==typeof require&&require;if(!o&&h)return h(r,!0);if(n)return n(r,!0);var m=new Error("Cannot find module '"+r+"'");throw m.code="MODULE_NOT_FOUND",m}var l=s[r]={exports:{}};e[r][0].call(l.exports,(function(t){return a(e[r][1][t]||t)}),l,l.exports,t,e,s,i)}return s[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,s){const i={createSvgElement:t=>document.createElementNS("http://www.w3.org/2000/svg",t)};class a{static validateInstanceof(t){if(!(t instanceof a))throw Error("Value has to be an instance of Dimensions.")}static validateDimension(t){if(!Number.isInteger(t))throw Error("Dimension value has to be an integer.")}constructor(t,e){a.validateDimension(t),a.validateDimension(e),this._width=t,this._height=e}get width(){return this._width}get height(){return this._height}}e.exports={UTILS:i,Dimensions:a}},{}],2:[function(t,e,s){const{PathCommands:i}=t("../../path_commands/main");e.exports={CanvasItem:class{constructor(t){t={stroke:!0,...t||{}},this.stroke=t.stroke,this.fill=t.fill,this.flatParams=t.flatParams,this.byMethodParams=t.byMethodParams}get stroke(){return this._stroke}set stroke(t){this._stroke=!!t,this._refresh()}get fill(){return this._fill}set fill(t){this._fill=!!t,this._refresh()}get flatParams(){return this._flatParams}set flatParams(t){this._flatParams={...t},this._refresh()}get byMethodParams(){return this._byMethodParams}set byMethodParams(t){this._byMethodParams={...t},this._refresh()}get commands(){return new i(null)}get path(){return this.commands.value}get layer(){return this._layer}set layer(t){this._layer=t}draw(){if(!this.layer)throw Error("Object has no layer to draw to.");let t=new Path2D(this.path);this.layer.ctx.save(),this._setFlatParams(),this._setByMethodParams(),this.stroke&&this.layer.ctx.stroke(t),this.fill&&this.layer.ctx.fill(t),this.layer.ctx.restore()}setFlatParam(t,e){if("string"!=typeof t)throw Error("Name has to be a string.");this._flatParams={...this._flatParams||{},[t]:e},this._refresh()}setByMethodParam(t,e){if("string"!=typeof t)throw Error("Name has to be a string.");if(!Array.isArray(e))throw Error("Arguments have to be an array.");this._byMethodParams={...this._byMethodParams||{},[t]:e},this._refresh()}_setFlatParams(){if(this.flatParams)for(let[t,e]of Object.entries(this.flatParams))this.layer.ctx[t]=e}_setByMethodParams(){if(this.byMethodParams)for(let[t,e]of Object.entries(this.byMethodParams))this.layer.ctx[t](...e)}_refresh(){this._commands&&this.layer&&this.layer.refresh()}}}},{"../../path_commands/main":27}],3:[function(t,e,s){const{CanvasItem:i}=t("./base"),{CircleCommands:a,Point:n}=t("../../path_commands/main");e.exports={CanvasCircle:class extends i{constructor(t,e,s){super(s),this.commands=new a(t,e),this._centre=t,this._radius=e}get centre(){return this._centre}set centre(t){this.commands.centre=t,this._centre=t,this._refresh()}get radius(){return this._radius}set radius(t){this.commands.radius=t,this._radius=t,this._refresh()}get commands(){return this._commands}set commands(t){if(!(t instanceof a))throw Error("Commands value has to be an CircleCommands instance.");this._commands=t,this._centre=t.centre,this._radius=t.radius,this._refresh()}}}},{"../../path_commands/main":27,"./base":2}],4:[function(t,e,s){const{CanvasItem:i}=t("./base"),{EllipseRadiuses:a,EllipseCommands:n,Point:r}=t("../../path_commands/main");e.exports={CanvasEllipse:class extends i{constructor(t,e,s){super(s),this.commands=new n(t,e),this._centre=t,this._radiuses=e}get centre(){return this._centre}set centre(t){this.commands.centre=t,this._centre=t,this._refresh()}get radiuses(){return this._radiuses}set radiuses(t){this.commands.radiuses=t,this._radiuses=t,this._refresh()}get commands(){return this._commands}set commands(t){if(!(t instanceof n))throw Error("Commands value has to be an EllipseCommands instance.");this._commands=t,this._centre=t.centre,this._radiuses=t.radiuses,this._refresh()}}}},{"../../path_commands/main":27,"./base":2}],5:[function(t,e,s){const{CanvasItem:i}=t("./base"),{CanvasCircle:a}=t("./circle"),{CanvasEllipse:n}=t("./ellipse"),{CanvasPath:r}=t("./path"),{CanvasPolygon:o}=t("./polygon"),{CanvasPolyline:h}=t("./polyline");e.exports={CanvasCircle:a,CanvasEllipse:n,CanvasItem:i,CanvasPath:r,CanvasPolygon:o,CanvasPolyline:h}},{"./base":2,"./circle":3,"./ellipse":4,"./path":6,"./polygon":7,"./polyline":8}],6:[function(t,e,s){const{CanvasItem:i}=t("./base"),{PathCommands:a}=t("../../path_commands/main");e.exports={CanvasPath:class extends i{constructor(t,e){super(e),this.value=t}get value(){return this._value}set value(t){this.commands=new a(t),this._value=t,this._refresh()}get commands(){return this._commands}set commands(t){if(!(t instanceof a))throw Error("Commands value has to be an PathCommands instance.");this._commands=t,this._value=t.value,this._refresh()}}}},{"../../path_commands/main":27,"./base":2}],7:[function(t,e,s){const{CanvasPolyline:i}=t("./polyline");e.exports={CanvasPolygon:class extends i{static COMMANDS_OPTIONS={isClose:!0}}}},{"./polyline":8}],8:[function(t,e,s){const{CanvasItem:i}=t("./base"),{Point:a,PointsCommands:n}=t("../../path_commands/main");e.exports={CanvasPolyline:class extends i{static COMMANDS_OPTIONS={};constructor(t,e){super(e),this.points=t}get points(){return this._points}set points(t){this.commands=new n(t,this.constructor.COMMANDS_OPTIONS),this._points=t,this._refresh()}get commands(){return this._commands}set commands(t){if(!(t instanceof n))throw Error("Commands value has to be an PointsCommands instance.");this._commands=t,this._points=t.items,this._refresh()}}}},{"../../path_commands/main":27,"./base":2}],9:[function(t,e,s){e.exports={canvas:t("./canvas/main"),svg:t("./svg/main")}},{"./canvas/main":5,"./svg/main":13}],10:[function(t,e,s){const{UTILS:i}=t("../../base");e.exports={SVGItem:class{constructor(t,e){this.element=i.createSvgElement(t),e={fill:"none",stroke:"#000000",...e||{}};for(let[t,s]of Object.entries(e))this.element.setAttribute(t,s)}getAttr(t){return this.element.getAttribute(t)}setAttr(t,e){this.element.setAttribute(t,e)}rmAttr(t){this.element.removeAttribute(t)}}}},{"../../base":1}],11:[function(t,e,s){const{SVGItem:i}=t("./base"),{CircleCommands:a,Point:n}=t("../../path_commands/main");e.exports={SVGCircle:class extends i{constructor(t,e,s){super("path",s),this.commands=new a(t,e),this._centre=t,this._radius=e}get centre(){return this._centre}set centre(t){this.commands.centre=t,this._centre=t,this.setAttr("d",this.commands.value)}get radius(){return this._radius}set radius(t){this.commands.radius=t,this._radius=t,this.setAttr("d",this.commands.value)}get commands(){return this._commands}set commands(t){if(!(t instanceof a))throw Error("Commands value has to be an CircleCommands instance.");this._commands=t,this._centre=t.centre,this._radius=t.radius,this.setAttr("d",this.commands.value)}}}},{"../../path_commands/main":27,"./base":10}],12:[function(t,e,s){const{SVGItem:i}=t("./base"),{EllipseRadiuses:a,EllipseCommands:n,Point:r}=t("../../path_commands/main");e.exports={SVGEllipse:class extends i{constructor(t,e,s){super("path",s),this.commands=new n(t,e),this._centre=t,this._radiuses=e}get centre(){return this._centre}set centre(t){this.commands.centre=t,this._centre=t,this.setAttr("d",this.commands.value)}get radiuses(){return this._radiuses}set radiuses(t){this.commands.radiuses=t,this._radiuses=t,this.setAttr("d",this.commands.value)}get commands(){return this._commands}set commands(t){if(!(t instanceof n))throw Error("Commands value has to be an EllipseCommands instance.");this._commands=t,this._centre=t.centre,this._radiuses=t.radiuses,this.setAttr("d",this.commands.value)}}}},{"../../path_commands/main":27,"./base":10}],13:[function(t,e,s){const{SVGItem:i}=t("./base"),{SVGCircle:a}=t("./circle"),{SVGEllipse:n}=t("./ellipse"),{SVGPath:r}=t("./path"),{SVGPolygon:o}=t("./polygon"),{SVGPolyline:h}=t("./polyline");e.exports={SVGItem:i,SVGCircle:a,SVGEllipse:n,SVGPath:r,SVGPolygon:o,SVGPolyline:h}},{"./base":10,"./circle":11,"./ellipse":12,"./path":14,"./polygon":15,"./polyline":16}],14:[function(t,e,s){const{SVGItem:i}=t("./base"),{PathCommands:a}=t("../../path_commands/main");e.exports={SVGPath:class extends i{constructor(t,e){super("path",e),this.value=t}get value(){return this._value}set value(t){this.commands=new a(t),this._value=t,this.setAttr("d",this.commands.value)}get commands(){return this._commands}set commands(t){if(!(t instanceof a))throw Error("Commands value has to be an PathCommands instance.");this._commands=t,this._value=t.value,this.setAttr("d",this.commands.value)}}}},{"../../path_commands/main":27,"./base":10}],15:[function(t,e,s){const{SVGPolyline:i}=t("./polyline");e.exports={SVGPolygon:class extends i{static COMMANDS_OPTIONS={isClose:!0}}}},{"./polyline":16}],16:[function(t,e,s){const{SVGItem:i}=t("./base"),{Point:a,PointsCommands:n}=t("../../path_commands/main");e.exports={SVGPolyline:class extends i{static COMMANDS_OPTIONS={};constructor(t,e){super("path",e),this.points=t}get points(){return this._points}set points(t){this.commands=new n(t,this.constructor.COMMANDS_OPTIONS),this._points=t,this.setAttr("d",this.commands.value)}get commands(){return this._commands}set commands(t){if(!(t instanceof n))throw Error("Commands value has to be an PointsCommands instance.");this._commands=t,this._points=t.items,this.setAttr("d",this.commands.value)}}}},{"../../path_commands/main":27,"./base":10}],17:[function(t,e,s){const{Dimensions:i}=t("../base");e.exports={BaseLayer:class{constructor(){this.element=this.createElement(),this.items={},this._zIndex=null,this._initialZIndex=null,this._isShowed=!0}get dimensions(){return this._dimensions}set dimensions(t){i.validateInstanceof(t),this._dimensions=t,this.element.setAttribute("width",t.width),this.element.setAttribute("height",t.height)}get isShowed(){return this._isShowed}get zIndex(){return this._zIndex}set zIndex(t){if(!Number.isInteger(t))throw Error("Z-index value has to be an integer.");null===this._initialZIndex&&(this._initialZIndex=t),this.element.style.zIndex=t,this._zIndex=t}resetZIndex(){null!==this._initialZIndex&&(this.zIndex=this._initialZIndex)}createElement(){let t=this._createElement();return t.style.position="absolute",t.style.top="0px",t.style.left="0px",t}_createElement(){}show(){this._isShowed=!0,this.element.style.display="block"}hide(){this._isShowed=!1,this.element.style.display="none"}addItem(t,e){if(t in this.items)throw Error(`Item with name "${t}" already exists.`);this.items[t]=e}removeItem(t){if(!(t in this.items))throw Error(`Item with name "${t}" does not exist.`);this._removeItemAdditional(this.items[t]),delete this.items[t]}_removeItemAdditional(t){}}}},{"../base":1}],18:[function(t,e,s){const{BaseLayer:i}=t("../base"),{Dimensions:a}=t("../../base"),{CanvasCircle:n,CanvasEllipse:r,CanvasPath:o,CanvasPolygon:h,CanvasPolyline:m}=t("../../items/canvas/main");e.exports={CanvasLayer:class extends i{constructor(t){t=t||{},super(),this.ctx=this.element.getContext("2d"),this._drawFunct=t.drawFunct}get dimensions(){return this._dimensions}set dimensions(t){super.dimensions=t,this.refresh()}addItem(t,e){super.addItem(t,e),e.layer=this,e.draw()}removeItem(t){super.removeItem(t),this.refresh()}refresh(){this.clear(),this._draw()}clear(){this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height)}createCircle(t,e,s,i){let a=new n(e,s,i);return this.addItem(t,a),a}createEllipse(t,e,s,i){let a=new r(e,s,i);return this.addItem(t,a),a}createPath(t,e,s){let i=new o(e,s);return this.addItem(t,i),i}createPolygon(t,e,s){let i=new h(e,s);return this.addItem(t,i),i}createPolyline(t,e,s){let i=new m(e,s);return this.addItem(t,i),i}_draw(){this._drawFunct&&this._drawFunct(this.ctx);for(let t of Object.values(this.items))t.draw()}_createElement(){return document.createElement("canvas")}}}},{"../../base":1,"../../items/canvas/main":5,"../base":17}],19:[function(t,e,s){const{CanvasLayer:i}=t("./base"),{CanvasLayerWithBGFiller:a}=t("./with_bg_filler"),{CanvasLayerWithBGImage:n}=t("./with_bg_image");e.exports={CanvasLayer:i,CanvasLayerWithBGFiller:a,CanvasLayerWithBGImage:n}},{"./base":18,"./with_bg_filler":20,"./with_bg_image":21}],20:[function(t,e,s){const{CanvasLayer:i}=t("./base");e.exports={CanvasLayerWithBGFiller:class extends i{constructor(t,e){super(e),this.bgFiller=t}get bgFiller(){return this._bgFiller}set bgFiller(t){this._bgFiller=t,this.dimensions&&this.refresh()}_draw(){this._drawBGFiller(),super._draw()}_drawBGFiller(){this.ctx.save(),this.ctx.fillStyle=this.bgFiller,this.ctx.fillRect(0,0,this.dimensions.width,this.dimensions.height),this.ctx.restore()}}}},{"./base":18}],21:[function(t,e,s){const{CanvasLayer:i}=t("./base");e.exports={CanvasLayerWithBGImage:class extends i{constructor(t,e){super(e=e||{}),this._repetition=e.repetition||"repeat",this._image=new Image,this._image.onload=()=>{this.refresh()},this.imageSrc=t}get imageSrc(){return this._imageUrl}set imageSrc(t){this._image.src=t}_draw(){this._drawBGImage(),super._draw()}_drawBGImage(){this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(this._image,this._repetition),this.ctx.fillRect(0,0,this.dimensions.width,this.dimensions.height),this.ctx.restore()}}}},{"./base":18}],22:[function(t,e,s){e.exports={base:t("./base"),canvas:t("./canvas/main"),svg:t("./svg/main")}},{"./base":17,"./canvas/main":19,"./svg/main":23}],23:[function(t,e,s){const{BaseLayer:i}=t("../base"),{Dimensions:a,UTILS:n}=t("../../base"),{SVGCircle:r,SVGEllipse:o,SVGItem:h,SVGPath:m,SVGPolygon:l,SVGPolyline:c}=t("../../items/svg/main");e.exports={SVGLayer:class extends i{createItem(t,e,s){let i=new h(e,s);return this.addItem(t,i),i}createCircle(t,e,s,i){let a=new r(e,s,i);return this.addItem(t,a),a}createEllipse(t,e,s,i){let a=new o(e,s,i);return this.addItem(t,a),a}createPath(t,e,s){let i=new m(e,s);return this.addItem(t,i),i}createPolygon(t,e,s){let i=new l(e,s);return this.addItem(t,i),i}createPolyline(t,e,s){let i=new c(e,s);return this.addItem(t,i),i}addItem(t,e){super.addItem(t,e),this.element.appendChild(e.element)}_removeItemAdditional(t){t.element.remove(),t.element=null}_createElement(){return n.createSvgElement("svg")}}}},{"../../base":1,"../../items/svg/main":13,"../base":17}],24:[function(t,e,s){e.exports={base:t("./base"),items:t("./items/main"),layers:t("./layers/main"),path_commands:t("./path_commands/main"),screen:t("./screen")}},{"./base":1,"./items/main":9,"./layers/main":22,"./path_commands/main":27,"./screen":29}],25:[function(t,e,s){class i{static NONE="none";static validate(t){if("string"!=typeof t)throw Error("Path commands has to be an string.");if(t==i.NONE)return;let e=["(M((\\s+\\d+){2})+)","(m((\\s+\\-?\\d+){2})+)"].join("|"),s=["(\\s+[LT]((\\s+\\d+){2})+)","(\\s+[lt]((\\s+\\-?\\d+){2})+)","(\\s+[HV](\\s+\\d+)+)","(\\s+[hv](\\s+\\-?\\d+)+)","(\\s+[C](((\\s+\\d+){2}){3})+)","(\\s+[c](((\\s+\\-?\\d+){2}){3})+)","(\\s+[SQ](((\\s+\\d+){2}){2})+)","(\\s+[sq](((\\s+\\-?\\d+){2}){2})+)","(\\s+[A]((\\s+\\d+){2}\\s+\\-?\\d+(\\s+[01]){2}(\\s+\\d+){2})+)","(\\s+[a]((\\s+\\d+){2}\\s+\\-?\\d+(\\s+[01]){2}(\\s+\\-?\\d+){2})+)"].join("|"),a=new RegExp(`^\\s*(${e})(${s})((\\s+(${e}))?(${s}))*(\\s+[Zz])?\\s*$`);if(!t.match(a))throw Error("Wrond path commands string.")}constructor(t){this.value=t||i.NONE}get value(){return this._value}set value(t){i.validate(t),this._value=t}}e.exports={PathCommands:i}},{}],26:[function(t,e,s){const{PathCommands:i}=t("./base"),{Point:a}=t("./points");class n{static validateValue(t){if(!Number.isInteger(t))throw Error("Radius value has to be an integer.")}constructor(t,e){this.first=t,this.second=e}[Symbol.toPrimitive](t){return"string"===t?`${this.first} ${this.second}`:null}get first(){return this._first}set first(t){return n.validateValue(t),this._first=t}get second(){return this._second}set second(t){return n.validateValue(t),this._second=t}}class r extends i{constructor(t,e){super(),this.centre=t,this.radiuses=e}get centre(){return this._centre}set centre(t){this._centre=t instanceof a?t:new a(...t),this._setValue()}get radiuses(){return this._radiuses}set radiuses(t){this._radiuses=t instanceof n?t:new n(...t),this._setValue()}_setValue(){if(!this.centre||!this.radiuses)return;let t=new a(this.centre.x-this.radiuses.first,this.centre.y),e=new a(this.centre.x+this.radiuses.first,this.centre.y);this.value=[`M ${t}`,`A ${this.radiuses} 0 1 0 ${e} ${this.radiuses} 0 0 0 ${t}`,"Z"].join(" ")}}e.exports={EllipseRadiuses:n,EllipseCommands:r,CircleCommands:class extends r{constructor(t,e){super(t,[e,e]),this._radius=e}get radius(){return this._radius}set radius(t){this.radiuses=[t,t],this._radius=t}}}},{"./base":25,"./points":28}],27:[function(t,e,s){const{PathCommands:i}=t("./base"),{EllipseRadiuses:a,EllipseCommands:n,CircleCommands:r}=t("./ellipses"),{Point:o,PointsCommands:h}=t("./points");e.exports={CircleCommands:r,EllipseCommands:n,EllipseRadiuses:a,PathCommands:i,Point:o,PointsCommands:h}},{"./base":25,"./ellipses":26,"./points":28}],28:[function(t,e,s){const{PathCommands:i}=t("./base");class a{static validateCoordinate(t){if(!Number.isInteger(t))throw Error("Point coordinate has to be an integer.")}constructor(t,e){this.x=t,this.y=e}[Symbol.toPrimitive](t){return"string"===t?`${this.x} ${this.y}`:null}get x(){return this._x}set x(t){a.validateCoordinate(t),this._x=t}get y(){return this._y}set y(t){a.validateCoordinate(t),this._y=t}}class n extends i{static validateItems(t){if(!Array.isArray(t))throw Error("Points items has to be an Array instance.");for(let e of t){if(!Array.isArray(e)||2!=e.length)throw Error("Point coordinates has to be array of two integers.");for(let t of e)a.validateCoordinate(t)}}constructor(t,e){super(),this._options=e||{},this.items=t}*[Symbol.iterator](){for(let t of this.items)yield t}get items(){return this._items}set items(t){n.validateItems(t),this._items=this._createItems(t),this._setValue()}_setValue(){if(!this.items)return;let t=this.items.map(((t,e)=>`${0===e?"M":"L"} ${t}`));this._options.isClose&&t.push("Z"),this.value=t.join(" ")}_createItems(t){return t.map((t=>new a(...t)))}}e.exports={Point:a,PointsCommands:n}},{"./base":25}],29:[function(t,e,s){const{Dimensions:i}=t("./base"),{CanvasLayer:a,CanvasLayerWithBGFiller:n,CanvasLayerWithBGImage:r}=t("./layers/canvas/main"),{SVGLayer:o}=t("./layers/svg/main");e.exports={Screen:class{constructor(t,e){this.element=document.getElementById(t),this.element.style.position="relative",e=e||{};let[s,a]=e.dimensions||[100,100];this.dimensions=new i(s,a),this.layers={},this._activeLayerName=null}get dimensions(){return this._dimensions}set dimensions(t){i.validateInstanceof(t),this._dimensions=t,this.element.style.width=`${t.width}px`,this.element.style.height=`${t.height}px`}addLayer(t,e){if(t in this.layers)throw Error(`Layer with name "${t}" already exists.`);e.zIndex=Object.keys(this.layers).length,e.dimensions=this.dimensions,this.layers[t]=e,this.element.appendChild(e.element),this._activeLayerName&&this.activateLayer(this._activeLayerName)}activateLayer(t){if(!(t in this.layers))throw Error(`Layer with name "${t}" does not exist.`);this.deactivateLayer(),this.layers[t].zIndex=Object.keys(this.layers).length,this._activeLayerName=t}deactivateLayer(){null!=this._activeLayerName&&(this.layers[this._activeLayerName].resetZIndex(),this._activeLayerName=null)}createCanvasLayer(t,e){let s=new a(e);return this.addLayer(t,s),s}createCanvasLayerWithBGFiller(t,e,s){let i=new n(e,s);return this.addLayer(t,i),i}createCanvasLayerWithBGImage(t,e,s){let i=new r(e,s);return this.addLayer(t,i),i}createSVGLayer(t){let e=new o;return this.addLayer(t,e),e}}}},{"./base":1,"./layers/canvas/main":19,"./layers/svg/main":23}],30:[function(t,e,s){window.TDG=t("./main")},{"./main":24}]},{},[30]);