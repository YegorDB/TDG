!function e(t,s,i){function a(n,o){if(!s[n]){if(!t[n]){var h="function"==typeof require&&require;if(!o&&h)return h(n,!0);if(r)return r(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var m=s[n]={exports:{}};t[n][0].call(m.exports,(function(e){return a(t[n][1][e]||e)}),m,m.exports,e,t,s,i)}return s[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)a(i[n]);return a}({1:[function(e,t,s){const i={createSvgElement:e=>document.createElementNS("http://www.w3.org/2000/svg",e)};class a{static validate(e){if(!(e instanceof a))throw Error("Value has to be an instance of Dimensions.")}constructor(e,t){this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}}t.exports={UTILS:i,Dimensions:a}},{}],2:[function(e,t,s){const{PathCommands:i}=e("../../path_commands/base");t.exports={CanvasItem:class{constructor(e){e={stroke:!0,...e||{}},this.stroke=e.stroke,this.fill=e.fill,this.flatParams=e.flatParams,this.byMethodParams=e.byMethodParams}get stroke(){return this._stroke}set stroke(e){this._stroke=!!e,this._refresh()}get fill(){return this._fill}set fill(e){this._fill=!!e,this._refresh()}get flatParams(){return this._flatParams}set flatParams(e){this._flatParams={...e},this._refresh()}get byMethodParams(){return this._byMethodParams}set byMethodParams(e){this._byMethodParams={...e},this._refresh()}get commands(){return new i(null)}get path(){return this.commands.value}get layer(){return this._layer}set layer(e){this._layer=e}draw(){if(!this.layer)throw Error("Object has no layer to draw to.");let e=new Path2D(this.path);this.layer.ctx.save(),this._setFlatParams(),this._setByMethodParams(),this.stroke&&this.layer.ctx.stroke(e),this.fill&&this.layer.ctx.fill(e),this.layer.ctx.restore()}setFlatParam(e,t){if("string"!=typeof e)throw Error("Name has to be a string.");this._flatParams={...this._flatParams||{},[e]:t},this._refresh()}setByMethodParam(e,t){if("string"!=typeof e)throw Error("Name has to be a string.");if(!Array.isArray(t))throw Error("Arguments have to be an array.");this._byMethodParams={...this._byMethodParams||{},[e]:t},this._refresh()}_setFlatParams(){if(this.flatParams)for(let[e,t]of Object.entries(this.flatParams))this.layer.ctx[e]=t}_setByMethodParams(){if(this.byMethodParams)for(let[e,t]of Object.entries(this.byMethodParams))this.layer.ctx[e](...t)}_refresh(){this._commands&&this.layer&&this.layer.refresh()}}}},{"../../path_commands/base":21}],3:[function(e,t,s){const{CanvasItem:i}=e("./base"),{CircleCommands:a}=e("../../path_commands/ellipses"),{Point:r}=e("../../path_commands/points");t.exports={CanvasCircle:class extends i{constructor(e,t,s){super(s),this.commands=new a(e,t),this._centre=e,this._radius=t}get centre(){return this._centre}set centre(e){this.commands.centre=e,this._centre=e,this._refresh()}get radius(){return this._radius}set radius(e){this.commands.radius=e,this._radius=e,this._refresh()}get commands(){return this._commands}set commands(e){if(!(e instanceof a))throw Error("Commands value has to be an CircleCommands instance.");this._commands=e,this._centre=e.centre,this._radius=e.radius,this._refresh()}}}},{"../../path_commands/ellipses":22,"../../path_commands/points":23,"./base":2}],4:[function(e,t,s){const{CanvasItem:i}=e("./base"),{EllipseRadiuses:a,EllipseCommands:r}=e("../../path_commands/ellipses"),{Point:n}=e("../../path_commands/points");t.exports={CanvasEllipse:class extends i{constructor(e,t,s){super(s),this.commands=new r(e,t),this._centre=e,this._radiuses=t}get centre(){return this._centre}set centre(e){this.commands.centre=e,this._centre=e,this._refresh()}get radiuses(){return this._radiuses}set radiuses(e){this.commands.radiuses=e,this._radiuses=e,this._refresh()}get commands(){return this._commands}set commands(e){if(!(e instanceof r))throw Error("Commands value has to be an EllipseCommands instance.");this._commands=e,this._centre=e.centre,this._radiuses=e.radiuses,this._refresh()}}}},{"../../path_commands/ellipses":22,"../../path_commands/points":23,"./base":2}],5:[function(e,t,s){const{CanvasItem:i}=e("./base"),{CanvasCircle:a}=e("./circle"),{CanvasEllipse:r}=e("./ellipse"),{CanvasPath:n}=e("./path"),{CanvasPolygon:o}=e("./polygon"),{CanvasPolyline:h}=e("./polyline");t.exports={CanvasCircle:a,CanvasEllipse:r,CanvasItem:i,CanvasPath:n,CanvasPolygon:o,CanvasPolyline:h}},{"./base":2,"./circle":3,"./ellipse":4,"./path":6,"./polygon":7,"./polyline":8}],6:[function(e,t,s){const{CanvasItem:i}=e("./base"),{PathCommands:a}=e("../../path_commands/base");t.exports={CanvasPath:class extends i{constructor(e,t){super(t),this.value=e}get value(){return this._value}set value(e){this.commands=new a(e),this._value=e,this._refresh()}get commands(){return this._commands}set commands(e){if(!(e instanceof a))throw Error("Commands value has to be an PathCommands instance.");this._commands=e,this._value=e.value,this._refresh()}}}},{"../../path_commands/base":21,"./base":2}],7:[function(e,t,s){const{CanvasPolyline:i}=e("./polyline");t.exports={CanvasPolygon:class extends i{static COMMANDS_OPTIONS={isClose:!0}}}},{"./polyline":8}],8:[function(e,t,s){const{CanvasItem:i}=e("./base"),{Point:a,PointsCommands:r}=e("../../path_commands/points");t.exports={CanvasPolyline:class extends i{static COMMANDS_OPTIONS={};constructor(e,t){super(t),this.points=e}get points(){return this._points}set points(e){this.commands=new r(e,this.constructor.COMMANDS_OPTIONS),this._points=e,this._refresh()}get commands(){return this._commands}set commands(e){if(!(e instanceof r))throw Error("Commands value has to be an PointsCommands instance.");this._commands=e,this._points=e.items,this._refresh()}}}},{"../../path_commands/points":23,"./base":2}],9:[function(e,t,s){t.exports={canvas:e("./canvas/main"),svg:e("./svg/main")}},{"./canvas/main":5,"./svg/main":11}],10:[function(e,t,s){const{UTILS:i}=e("../../base");t.exports={SVGItem:class{constructor(e,t){this.element=i.createSvgElement(e),t={fill:"none",stroke:"#000000",...t||{}};for(let[e,s]of Object.entries(t))this.element.setAttribute(e,s)}getAttr(e){return this.element.getAttribute(e)}setAttr(e,t){this.element.setAttribute(e,t)}removeAttr(e){this.element.removeAttribute(e)}}}},{"../../base":1}],11:[function(e,t,s){const{SVGItem:i}=e("./base"),{SVGPath:a}=e("./path");t.exports={SVGItem:i,SVGPath:a}},{"./base":10,"./path":12}],12:[function(e,t,s){const{SVGItem:i}=e("./base"),{PathCommands:a}=e("../../path_commands/base");t.exports={SVGPath:class extends i{constructor(e,t){super("path",t),this.value=e}get value(){return this._value}set value(e){this.commands=new a(e),this._value=e,this.setAttr("d",this.commands.value)}get commands(){return this._commands}set commands(e){if(!(e instanceof a))throw Error("Commands value has to be an PathCommands instance.");this._commands=e,this._value=e.value,this.setAttr("d",this.commands.value)}}}},{"../../path_commands/base":21,"./base":10}],13:[function(e,t,s){const{Dimensions:i}=e("../base");t.exports={BaseLayer:class{constructor(){this.element=this.createElement(),this.items={},this._zIndex=null,this._initialZIndex=null,this._isShowed=!0}get dimensions(){return this._dimensions}set dimensions(e){i.validate(e),this._dimensions=e}get isShowed(){return this._isShowed}get zIndex(){return this._zIndex}set zIndex(e){if(!Number.isInteger(e))throw Error("Z-index value has to be an integer.");null===this._initialZIndex&&(this._initialZIndex=e),this.element.style.zIndex=e,this._zIndex=e}resetZIndex(){null!==this._initialZIndex&&(this.zIndex=this._initialZIndex)}createElement(){let e=this._createElement();return e.style.position="absolute",e.style.top="0px",e.style.left="0px",e}_createElement(){}show(){this._isShowed=!0,this.element.style.display="block"}hide(){this._isShowed=!1,this.element.style.display="none"}addItem(e,t){if(e in this.items)throw Error(`Item with name "${e}" already exists.`);this.items[e]=t}removeItem(e){if(!(e in this.items))throw Error(`Item with name "${e}" does not exist.`);this._removeItemAdditional(this.items[e]),delete this.items[e]}_removeItemAdditional(e){}}}},{"../base":1}],14:[function(e,t,s){const{BaseLayer:i}=e("../base"),{Dimensions:a}=e("../../base"),{CanvasCircle:r,CanvasEllipse:n,CanvasPath:o,CanvasPolygon:h,CanvasPolyline:l}=e("../../items/canvas/main");t.exports={CanvasLayer:class extends i{constructor(e){e=e||{},super(),this.ctx=this.element.getContext("2d"),this._drawFunct=e.drawFunct}get dimensions(){return this._dimensions}set dimensions(e){super.dimensions=e,this.element.width=e.width,this.element.height=e.height,this.refresh()}addItem(e,t){super.addItem(e,t),t.layer=this,t.draw()}removeItem(e){super.removeItem(e),this.refresh()}refresh(){this.clear(),this._draw()}clear(){this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height)}createCircle(e,t,s,i){let a=new r(t,s,i);return this.addItem(e,a),a}createEllipse(e,t,s,i){let a=new n(t,s,i);return this.addItem(e,a),a}createPath(e,t,s){let i=new o(t,s);return this.addItem(e,i),i}createPolygon(e,t,s){let i=new h(t,s);return this.addItem(e,i),i}createPolyline(e,t,s){let i=new l(t,s);return this.addItem(e,i),i}_draw(){this._drawFunct&&this._drawFunct(this.ctx);for(let e of Object.values(this.items))e.draw()}_createElement(){return document.createElement("canvas")}}}},{"../../base":1,"../../items/canvas/main":5,"../base":13}],15:[function(e,t,s){const{CanvasLayer:i}=e("./base"),{CanvasLayerWithBGFiller:a}=e("./with_bg_filler"),{CanvasLayerWithBGImage:r}=e("./with_bg_image");t.exports={CanvasLayer:i,CanvasLayerWithBGFiller:a,CanvasLayerWithBGImage:r}},{"./base":14,"./with_bg_filler":16,"./with_bg_image":17}],16:[function(e,t,s){const{CanvasLayer:i}=e("./base");t.exports={CanvasLayerWithBGFiller:class extends i{constructor(e,t){super(t),this.bgFiller=e}get bgFiller(){return this._bgFiller}set bgFiller(e){this._bgFiller=e,this.dimensions&&this.refresh()}_draw(){this._drawBGFiller(),super._draw()}_drawBGFiller(){this.ctx.save(),this.ctx.fillStyle=this.bgFiller,this.ctx.fillRect(0,0,this.dimensions.width,this.dimensions.height),this.ctx.restore()}}}},{"./base":14}],17:[function(e,t,s){const{CanvasLayer:i}=e("./base");t.exports={CanvasLayerWithBGImage:class extends i{constructor(e,t){super(t=t||{}),this._repetition=t.repetition||"repeat",this._image=new Image,this._image.onload=()=>{this.refresh()},this.imageSrc=e}get imageSrc(){return this._imageUrl}set imageSrc(e){this._image.src=e}_draw(){this._drawBGImage(),super._draw()}_drawBGImage(){this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(this._image,this._repetition),this.ctx.fillRect(0,0,this.dimensions.width,this.dimensions.height),this.ctx.restore()}}}},{"./base":14}],18:[function(e,t,s){t.exports={base:e("./base"),canvas:e("./canvas/main"),svg:e("./svg/main")}},{"./base":13,"./canvas/main":15,"./svg/main":19}],19:[function(e,t,s){const{BaseLayer:i}=e("../base"),{Dimensions:a,UTILS:r}=e("../../base");t.exports={SVGLayer:class extends i{get dimensions(){return this._dimensions}set dimensions(e){super.dimensions=e,this.element.style.width=`${e.width}px`,this.element.style.height=`${e.height}px`}addItem(e,t){super.addItem(e,t),this.element.appendChild(t.element)}_removeItemAdditional(e){e.element.remove(),e.element=null}_createElement(){return r.createSvgElement("svg")}}}},{"../../base":1,"../base":13}],20:[function(e,t,s){t.exports={base:e("./base"),items:e("./items/main"),layers:e("./layers/main"),screen:e("./screen")}},{"./base":1,"./items/main":9,"./layers/main":18,"./screen":24}],21:[function(e,t,s){class i{static NONE="none";static validate(e){if("string"!=typeof e)throw Error("Path commands has to be an string.");if(e==i.NONE)return;let t=["(M((\\s+\\d+){2})+)","(m((\\s+\\-?\\d+){2})+)"].join("|"),s=["(\\s+[LT]((\\s+\\d+){2})+)","(\\s+[lt]((\\s+\\-?\\d+){2})+)","(\\s+[HV](\\s+\\d+)+)","(\\s+[hv](\\s+\\-?\\d+)+)","(\\s+[C](((\\s+\\d+){2}){3})+)","(\\s+[c](((\\s+\\-?\\d+){2}){3})+)","(\\s+[SQ](((\\s+\\d+){2}){2})+)","(\\s+[sq](((\\s+\\-?\\d+){2}){2})+)","(\\s+[A]((\\s+\\d+){2}\\s+\\-?\\d+(\\s+[01]){2}(\\s+\\d+){2})+)","(\\s+[a]((\\s+\\d+){2}\\s+\\-?\\d+(\\s+[01]){2}(\\s+\\-?\\d+){2})+)"].join("|"),a=new RegExp(`^\\s*(${t})(${s})((\\s+(${t}))?(${s}))*(\\s+[Zz])?\\s*$`);if(!e.match(a))throw Error("Wrond path commands string.")}constructor(e){this.value=e||i.NONE}get value(){return this._value}set value(e){i.validate(e),this._value=e}}t.exports={PathCommands:i}},{}],22:[function(e,t,s){const{PathCommands:i}=e("./base"),{Point:a}=e("./points");class r{static validateValue(e){if(!Number.isInteger(e))throw Error("Radius value has to be an integer.")}constructor(e,t){this.first=e,this.second=t}[Symbol.toPrimitive](e){return"string"===e?`${this.first} ${this.second}`:null}get first(){return this._first}set first(e){return r.validateValue(e),this._first=e}get second(){return this._second}set second(e){return r.validateValue(e),this._second=e}}class n extends i{constructor(e,t){super(),this.centre=e,this.radiuses=t}get centre(){return this._centre}set centre(e){this._centre=e instanceof a?e:new a(...e),this.setValue()}get radiuses(){return this._radiuses}set radiuses(e){this._radiuses=e instanceof r?e:new r(...e),this.setValue()}setValue(){if(!this.centre||!this.radiuses)return;let e=new a(this.centre.x-this.radiuses.first,this.centre.y),t=new a(this.centre.x+this.radiuses.first,this.centre.y);this.value=`\n      M ${e}\n      A ${this.radiuses} 0 1 0 ${t}\n        ${this.radiuses} 0 0 0 ${e}\n      Z\n    `}}t.exports={EllipseCommands:n,CircleCommands:class extends n{constructor(e,t){super(e,[t,t]),this.radius=t}get radius(){return this._radius}set radius(e){this.radiuses=[e,e],this._radius=e}}}},{"./base":21,"./points":23}],23:[function(e,t,s){const{PathCommands:i}=e("./base");class a{static validateCoordinate(e){if(!Number.isInteger(e))throw Error("Point coordinate has to be an integer.")}constructor(e,t){this.x=e,this.y=t}[Symbol.toPrimitive](e){return"string"===e?`${this.x} ${this.y}`:null}get x(){return this._x}set x(e){a.validateCoordinate(e),this._x=e}get y(){return this._y}set y(e){a.validateCoordinate(e),this._y=e}}class r extends i{static validateItems(e){if(!Array.isArray(e))throw Error("Points items has to be an Array instance.");for(let t of e){if(!Array.isArray(t)||2!=t.length)throw Error("Point coordinates has to be array of two integers.");for(let e of t)a.validateCoordinate(e)}}constructor(e,t=null){super(),this._options=t||{},this.items=e}*[Symbol.iterator](){for(let e of this.items)yield e}get items(){return this._items}set items(e){r.validateItems(e),this._items=this._createItems(e),this.setValue()}setValue(){if(!this.items)return;let e=this.items.map(((e,t)=>`${0===t?"M":"L"} ${e}`));this._options.isClose&&e.push("Z"),this.value=e.join(" ")}_createItems(e){return e.map((e=>new a(...e)))}}t.exports={Point:a,PointsCommands:r}},{"./base":21}],24:[function(e,t,s){const{Dimensions:i}=e("./base"),{CanvasLayer:a,CanvasLayerWithBGFiller:r,CanvasLayerWithBGImage:n}=e("./layers/canvas/main"),{SVGLayer:o}=e("./layers/svg/main");t.exports={Screen:class{constructor(e,t){this.element=document.getElementById(e),this.element.style.position="relative",t=t||{};let[s,a]=t.dimensions||[100,100];this.dimensions=new i(s,a),this.layers={},this._activeLayerName=null}get dimensions(){return this._dimensions}set dimensions(e){i.validate(e),this._dimensions=e,this.element.style.width=`${e.width}px`,this.element.style.height=`${e.height}px`}addLayer(e,t){if(e in this.layers)throw Error(`Layer with name "${e}" already exists.`);t.zIndex=Object.keys(this.layers).length,t.dimensions=this.dimensions,this.layers[e]=t,this.element.appendChild(t.element),this._activeLayerName&&this.activateLayer(this._activeLayerName)}activateLayer(e){if(!(e in this.layers))throw Error(`Layer with name "${e}" does not exist.`);this.deactivateLayer(),this.layers[e].zIndex=Object.keys(this.layers).length,this._activeLayerName=e}deactivateLayer(){null!=this._activeLayerName&&(this.layers[this._activeLayerName].resetZIndex(),this._activeLayerName=null)}createCanvasLayer(e,t){let s=new a(t);return this.addLayer(e,s),s}createCanvasLayerWithBGFiller(e,t,s){let i=new r(t,s);return this.addLayer(e,i),i}createCanvasLayerWithBGImage(e,t,s){let i=new n(t,s);return this.addLayer(e,i),i}createSVGLayer(e){let t=new o;return this.addLayer(e,t),t}}}},{"./base":1,"./layers/canvas/main":15,"./layers/svg/main":19}],25:[function(e,t,s){window.TDG=e("./main")},{"./main":20}]},{},[25]);